\documentclass[a4paper]{article}

\usepackage{latexsym, amsmath, amssymb}
\usepackage{amsthm}
\RequirePackage{mathrsfs}
\RequirePackage{stmaryrd} %boxes
\usepackage{diagxy}
\usepackage{bussproofs}

\newtheorem{definition}{Definition}
\newtheorem*{remark}{Remark}

\newcommand{\hollow}{\mathsf{hollow}}
\newcommand{\dblplus}{+\hspace{-4pt}+}
\newcommand{\glob}[2]{(\hspace{-2pt}({#1},{#2})\hspace{-2pt})}
\newcommand{\ditto}{\mathrm{- " -}}
\newcommand{\mnote}[1]{\marginpar{\footnotesize{#1}}}
\newcommand{\cell}{\mathsf{cell}}
\newcommand{\obj}{\mathsf{obj}}
\newcommand{\Set}{\mathsf{Set}}
\newcommand{\Glob}{\mathsf{Glob}}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\Con}{\mathsf{Con}}
\newcommand{\Cat}{\mathsf{Cat}}
\newcommand{\Obj}{\mathsf{Obj}}
\newcommand{\Tel}{\mathsf{Tel}}
\newcommand{\suc}{\mathsf{suc}}
\newcommand{\dom}{\mathsf{dom}}
\newcommand{\cod}{\mathsf{cod}}
\newcommand{\sym}[1]{{#1}^{-1}}
\newcommand{\refl}[1]{\id~{#1}}
\newcommand{\trans}[2]{#1 \text{;} #2}
\newcommand{\domrm}{\mathrm{dom}}
\newcommand{\codrm}{\mathrm{cod}}
%\newcommand{\meets}{\mathsf{meets}}
\newcommand{\meets}{\between}
\newcommand{\zeromeets}{\mathsf{zero}}
\newcommand{\sucmeets}[1]{\mathsf{suc}}
\newcommand{\telzero}[1]{\langle{#1}\rangle}
%\newcommand{\telzero}[1]{\diamond}
\newcommand{\telsuc}[3]{#1\llbracket {#2},{#3}\rrbracket}
\newcommand{\cat}[1]{{#1}\Downarrow}
\newcommand{\homcat}[3]{{#1}[#2,#3]}
\newcommand{\budoteq}{\bullet_{\doteq}}
\newcommand{\homdoteqcat}[3]{{#1}[#2,#3]_{\doteq}}
\newcommand{\intpr}[1]{\llbracket #1 \rrbracket}
\newcommand{\id}{\mathsf{id}}
\newcommand{\idTel}[2]{\mathsf{idTel}\,{#1}\,{#2}}
\newcommand{\IdCat}[2]{\mathsf{IdCat}\,{#1}\,{#2}}
\newcommand{\ItId}{\mathsf{ItId}}
\newcommand{\depth}{\mathsf{depth}}
\newcommand{\preptele}[3]{\llbracket #1,#2\rrbracket #3}
\newenvironment{ondrej}{\begin{quote}\footnotesize \textbf{Ondrej:}}{\normalsize\end{quote}}
\newcommand{\substobj}[1]{\ulcorner #1 \urcorner}
\newcommand{\Iddd}[2]{{#1}\,\equiv\,{#2}}
\newcommand{\coh}{\mathsf{coh}}
\newcommand{\cohCat}{\mathsf{cohCat}}
\newcommand{\dblline}{}
\newcommand{\emptycon}{\varepsilon}
\newcommand{\var}{\mathsf{var}}
\newcommand{\wk}{\mathsf{wk}}

\renewcommand{\to}{\longrightarrow}

\begin{document}
\begin{center}\Large{A syntactical approach to weak $\omega$-categories}
\end{center}
\begin{center}
Thorsten Altenkirch and Ond\v rej Ryp\'a\v cek  
\end{center}

\section{Syntax of weak $\omega$-categories}
\label{sec:syntax}
\subsection{Syntactical Globular Sets}
\label{sec:framework}
%
%
We start introducing syntax for globular sets as follows: 
\[
\mathbf{data}\;
\AxiomC{$\mathsf{Con} : \mathsf{Set}$}
\DisplayProof
\;
\mathbf{where}
\;
\AxiomC{\mathstrut}
\dblline
\UnaryInfC{$\varepsilon : \mathsf{Con}$}
\DisplayProof
\;;\;
\AxiomC{$\Gamma : \mathsf{Con}$}
\AxiomC{$C : \mathsf{Cat}~\Gamma$}
\dblline
\BinaryInfC{$(\Gamma , C) : \mathsf{Con}$}
\DisplayProof
\]
\[
\mathbf{data}\;
\AxiomC{$\Gamma : \mathsf{Con}$}
\UnaryInfC{$\mathsf{Cat}~\Gamma : \mathsf{Set}$}
\DisplayProof
\;\mathbf{where}\;
%\AxiomC{$\{\Gamma : \mathsf{Con} \}$}
\AxiomC{$\phantom{\Gamma}$}
\dblline
\UnaryInfC{$\bullet : \mathsf{Cat}~\Gamma$}
\DisplayProof
\;;\;
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$C : \mathsf{Cat}~\Gamma$}
\AxiomC{$a~b : \mathsf{Obj}~C$}
\dblline
\BinaryInfC{$C[ \,a\,,\,b\,] : \mathsf{Cat}~\Gamma$}
\DisplayProof
\]
\[
\mathbf{data}\;
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$C : \mathsf{Cat}~\Gamma$}
\UnaryInfC{$\mathsf{Obj}~C:\mathsf{Set}$}
\DisplayProof
\;
\mathbf{where}
\;\cdots
\]
%
We introduce mutually recursively \emph{contexts}, $\mathsf{Con}$,
\emph{categories}, $\Cat$, 
and \emph{objects}, $\Obj$. Contexts are telescopes of categories;
\emph{categories} in context are built inductively from a base category,
$\bullet$, by formation of homcategories, $\homcat{C}{a}{b}$.
%
We omit the constructors for $\Obj$ for the moment. Their development
is the subject of the rest of the text.  
% We use double horizontal
% lines to introduce constructors of datatypes. 
We leave out as many assumptions as can be inferred from the
context. For example, the assumption $\Gamma : \Con$ can be inferred
in the rule for $\bullet$ introduction. In such cases when we need to
\emph{name} implicit assumptions, we use curly brackets. We also leave
out type annotations where inferable.

% In summary, expressions
% for categories are of the form 
% \[
% \bullet [~a_0~,~b_0~]\cdots[~a_k~,~b_k~]
% \]
% where each $a_i$, $b_i$ are objects in category $\bullet
% [~a_0~,~b_0~]\cdots[~a_{i-1}~,~b_{i-1}~]$. 

%
The role of contexts is to introduce irreducible objects --
variables. Using De Bruijn indexing we introduce nameless variables in
contexts as follows:
\[
\mathbf{data}\;
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$C : \mathsf{Cat}~\Gamma$}
\UnaryInfC{$\mathsf{Var}~C : \mathsf{Set}$}
\DisplayProof
\;\mathbf{where}\;
\AxiomC{$\phantom{I}$}
%\AxiomC{$\\{\Gamma\}$}
%\AxiomC{$\{C : \Cat~\Gamma\}$}
\dblline
\UnaryInfC{$\mathsf{vz}:\mathsf{Var}~(\mathsf{wk}~C)$}
\DisplayProof
\;;
\]
\[
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$v : \mathsf{Var}~C$}
\dblline
\UnaryInfC{$\mathsf{vs}~v : \mathsf{Var}~(\mathsf{wk}~C~D)$}
\DisplayProof
\]
where $\mathsf{wk}$ is weakening defined for categories by
induction on the structure in the obvious way: 
\[
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$C~D : \mathsf{Cat}~\Gamma$}
\UnaryInfC{$\mathsf{wk}~C~D : \mathsf{Cat}~(\Gamma,D)\qquad\mathsf{wk}~\bullet~D\,=\,\bullet$}
\DisplayProof
\]
\[
\AxiomC{$C~D : \mathsf{Cat}~\Gamma$}
\UnaryInfC{$\mathsf{wk}~(\homcat{C}{a}{b})~D\,=\,(\mathsf{wk}~C~D)[\mathsf{wk}~a~D,\mathsf{wk}~b~D]$}
\DisplayProof
\]
% \mathsf{wk} : \{\Gamma\}()
% \rightarrow 
% \enspace,\]
%
from weakening for objects:
\[
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$\{C:\Cat~\Gamma\}$}
\AxiomC{$x : \mathsf{Obj}~C$}
\AxiomC{$D:\Cat~\Gamma$}
\dblline
\TrinaryInfC{$\mathsf{wk}~x~D:\mathsf{Obj}~(\mathsf{wk}~C~D)$}
\DisplayProof
\enspace,
\]
which is defined as a data constructor of $\mathsf{Obj}$. 

Variables become objects by the following data constructor of $\Obj$:
\[
%\AxiomC{$\{C\}$}
\AxiomC{$v : \mathsf{Var}~C$}
\dblline
\UnaryInfC{$\mathsf{var}~v : \mathsf{Obj}~C$}
\DisplayProof
\]
%
This completes the definition of globular sets with variables. To
explicitly define a globular set out of the syntactical presentation
we define globular sets coniductively as follows:

% where each
%   $G_n$ is a set in Voevodsky's sense \cite{}. \mnote{I want a proper
%     Set and the only way to say it in Type Theory is by
%     contractibility.} Formally, we define 
% $\mathsf{Glob}$ by the following \emph{coinductive}
% definition:
% % , where we use Altenkirch's \emph{delay}, $\sharp$, and
% % \emph{force}, $\flat$, on coinductive sets $S^\infty$
% %\cite{}:
\[
\AxiomC{$\{\Gamma : \Con \}$}
\UnaryInfC{$\mathsf{Glob}:\Set$}
\DisplayProof
\quad
\AxiomC{$ O : \Set$}
\AxiomC{$ H : ( a ~ b : \Set) \rightarrow \mathsf{Glob}$}
% \noLine
% \BinaryInfC{$C : (a ~ b : O) \rightarrow
%   \Sigma(p : a \equiv b)((q : a \equiv b) \rightarrow p \equiv q)$}
\BinaryInfC{$\glob{O}{H} : \mathsf{Glob}$}
\DisplayProof
\]
for which we introduce projections:
\[
\mathsf{obj}~\glob{x}{y} = x \qquad \mathsf{hom}~\glob{x}{y} = y 
\]
% Note that axiom $C$ in the definition of $\mathsf{glob}$ is the
% statement that propositional equality in $O$ is contractible.
\noindent
Then for each $\Gamma$ and  $C : \Cat~\Gamma$, 
\[\mathsf{glob}~C =
\glob{\Obj~C}{\lambda~x~y.\mathsf{glob}~\homcat{C}{x}{y}}\]
%
Finally we define the globular set of a context $\Gamma$ as
\begin{equation}\label{eq:glob-of-gamma}
\mathsf{glob}~\Gamma~=~\mathsf{glob}~(\bullet~\{\Gamma\})
\end{equation}
%
% A \emph{globular set morphism} $\glob{O}{H} \to \glob{O'}{H'}$ is an 
% \[f : O \to O'\]
% together with a collection:
% \[h ~ x ~ y : H ~ x ~ y \to H'~(f~x)~(f~y)\enspace.\]


We will need the following definition:
\[
%\AxiomC{$\{\Gamma\}$}
\AxiomC{$C : \Cat~\Gamma$}
\UnaryInfC{$\mathsf{depth}~C : \Nat$}
\DisplayProof
\quad
\AxiomC{$\mathstrut$}
\UnaryInfC{$\mathsf{depth}~\bullet\,=\,0$}
\DisplayProof
\quad
%\AxiomC{$C : \Cat~\Gamma$}
%\AxiomC{$a~b : \Obj~C$}
\AxiomC{$\mathstrut$}
\UnaryInfC{$\mathsf{depth}~(C[a,b])~=~(\mathsf{depth}~C) + 1$}
\DisplayProof
\enspace,\]
where $\Nat$ is the $\Set$ of natural numbers with constructors $0$ and $+1$.
%
% &\mathsf{depth}:(\mathsf{Cat}~\Gamma)\rightarrow \Nat\\
% &\mathsf{depth}~\bullet = 0\\
% &\mathsf{depth}~(C[a,b]) = (\mathsf{depth}~C) + 1
% \end{align*}
%
Then any $x : \Obj~C$ such that $\mathsf{depth}~C \equiv n$, where
$\equiv$ denotes propositional equality, is called an \emph{$n$-cell}.
%
We use the usual arrow notation for categories and objects. For
instance, $\bullet[a,b]$, $\bullet[a,b][f,g]$ and $\alpha :
\Obj~(\bullet[a,b][f,g])$ are pictured respectively as follows:
\[\bfig
\morphism/{}/<300,0>[a`b;]
\efig
\quad\qquad 
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;g]
\efig
\qquad 
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;g]
\morphism(250,80)|r|<0,-140>[`;\alpha]
\efig
\]
%
We also write, as usual, $x : a_n\longrightarrow b_n : \cdots
: a_0 \longrightarrow b_0$ for an 
$x : \Obj~(\bullet[a_0,b_0]\cdots[a_n,b_n])$. 

% This is the basic setup for the syntax of weak omega categories,
% obviously more constructors for $\mathsf{Obj}$ are needed which we
% will discussed in the rest of the text. 

\subsection{Composition}\label{sec:composition}
%
\newcommand{\cC}{\mathcal{C}}
%
In the ordinary case, a category, $\mathcal{C}$, defines a partial
operation of composition on its arrows. Explicitly, for $a$, $b$, $c$
objects of $\mathcal{C}$, $f$ in $\homcat{\mathcal{C}}{a}{b}$, $g$  in
$\homcat{\mathcal{C}}{b}{c}$, there is a $gf$ in $\homcat{\mathcal{C}}{a}{c}$.
%
In the higher-dimensional case, $\cC(a,b)$ and $\cC(b,c)$ are not mere
sets but $\omega$-categories and composition extends from sets the
whole hom-categories. Informally: for $a$, $b$, $c$ as before, $f$,
$g$, $n$-cells of homcategories $\cC(a,b)$ and $\cC(b,c)$,
respectively, one requires an $n$-cell $g\circ f$ of $\cC(a,c)$. The
fact that both $f$ and $g$ are of the same relative depth with respect
to $\cC$ is important, as well the fact the homcategories $f$ and $g$
lie in meet at a common object, $b$, of $\cC$. Following are some
examples of valid compositions for increasing $n$:
\begin{align}
\label{eq:comp1}
\bfig
\morphism[a`b;f]
\morphism(500,0)[b`c;g]
\efig
&\quad\mapsto\quad
\bfig
\morphism[a`c;gf]
\efig
\\
\label{eq:comp2}
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(250,50)<0,-100>[`;\alpha]
\morphism(500,0)/{@{>}@/^1em/}/[b`c;g]
\morphism(500,0)|b|/{@{>}@/_1em/}/[b`c;g']
\morphism(750,50)<0,-100>[`;\beta]
\efig
&\quad\mapsto\quad
\bfig
\morphism/{@{>}@/^1em/}/[a`c;gf]
\morphism|b|/{@{>}@/_1em/}/[a`c;g'f']
\morphism(250,50)<0,-100>[`;\beta\alpha]
\efig\\
\label{eq:comp3}
\bfig\scalefactor{1.2}
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(180,50)/{@{>}@/_.1em/}/<0,-100>[`;\alpha]
\morphism(320,50)|r|/{@{>}@/^.1em/}/<0,-100>[`;\alpha']
\morphism(500,0)/{@{>}@/^1em/}/[b`c;g]
\morphism(500,0)|b|/{@{>}@/_1em/}/[b`c;g']
\morphism(680,50)/{@{>}@/_.1em/}/<0,-100>[`;\beta]
\morphism(820,50)|r|/{@{>}@/^.1em/}/<0,-100>[`;\beta']
\morphism(200,0)<100,0>[`;\gamma]
\morphism(700,0)<100,0>[`;\delta]
\efig
&\quad\mapsto\quad
\bfig
\morphism/{@{>}@/^1em/}/[a`c;gf]
\morphism|b|/{@{>}@/_1em/}/[a`c;g'f']
\morphism(180,50)/{@{>}@/_.1em/}/<0,-100>[`;\beta\alpha]
\morphism(320,50)|r|/{@{>}@/^.1em/}/<0,-100>[`;\beta'\hspace{-3pt}\alpha']
\morphism(200,0)<100,0>[`;\delta\gamma]
\efig\\
\label{eq:comp4}
\bfig\scalefactor{1.2}
\morphism/{@{>}@/^1.7em/}/[a`b;f]
\morphism|m|[a`b;f']
\morphism(180,110)/{@{>}@/_.1em/}/<0,-100>[`;\alpha]
\morphism(320,110)|r|/{@{>}@/^.1em/}/<0,-100>[`;\alpha']
\morphism(200,55)<100,0>[`;\gamma]
%
\morphism|b|/{@{>}@/_1.7em/}/[a`b;f'']
\morphism(180,-10)/{@{>}@/_.1em/}/<0,-100>[`;\beta]
\morphism(320,-10)|r|/{@{>}@/^.1em/}/<0,-100>[`;\beta']
\morphism(200,-55)|b|<100,0>[`;\delta]
\efig
&\quad\mapsto\quad
\bfig\scalefactor{2}
\morphism/{@{>}@/^1.3em/}/[a`c;f]
\morphism|b|/{@{>}@/_1.3em/}/[a`c;f'']
\morphism(180,50)/{@{>}@/_.1em/}/<0,-100>[`;\beta\cdot\alpha]
\morphism(320,50)|r|/{@{>}@/^.1em/}/<0,-100>[`;\beta'\cdot\alpha']
\morphism(200,0)<100,0>[`;\delta\cdot\gamma]
\efig
\end{align}
%
Examples \eqref{eq:comp1}-\eqref{eq:comp3} are compositions in
the category $\bullet$, while \eqref{eq:comp4} is a
composition in $\homcat{\bullet}{a}{b}$. We formalise this as follows.

\paragraph{Telescopes}
Informally, a \emph{telescope} is a category relative to
another category. Formally, telescopes, $\Tel$, are defined below at the same time as a
\emph{normalisation} function $\Downarrow$, which takes a telescope to
a category:
\[
\AxiomC{$C : \Cat~\Gamma$}
\AxiomC{$n : \Nat$}
\BinaryInfC{$\Tel~C~n : \Set$}
\DisplayProof
\quad
\AxiomC{$\{C : \Cat~\Gamma\}$}
\AxiomC{$T : \Tel~C~n$}
\BinaryInfC{$\cat{T}\, : \Cat~\Gamma$}
\DisplayProof
\]
Telescopes are like categories except that the base case is an
arbitrary category $C$ rather than $\bullet$\,:
\[
\AxiomC{$C : \Cat~\Gamma$}
\dblline
\UnaryInfC{$\telzero{C} : \Tel~C~0$}
\DisplayProof
\quad
\AxiomC{$T : \Tel~C~n$}
\AxiomC{$a~b : \Obj~(\cat{T})$}
\BinaryInfC{$\telsuc{T}{a}{b} : \Tel ~ C ~ (n+1)$}
\DisplayProof
\]
\[
\AxiomC{$\telzero{C} \Downarrow \, = \, C$}
\DisplayProof
\quad
\AxiomC{$\telsuc{t}{a}{b} \Downarrow \, = \, \homcat{(t\Downarrow)}{a}{b}$}
\DisplayProof 
\]
%
We say that an object $x : \Obj~(\cat{T})$ \emph{lies in (the
  telescope) $T$}. When $T$ is relative to a category $C$, $x$ is
called an \emph{object relative to $C$.} 
%
An example of
a telescope is
$\telsuc{\telzero{\homcat{\homcat{\bullet}{a}{b}}{f}{g}}}{\alpha}{\alpha'}$:
\[\bfig
\morphism(350,1150)|l|/{@{>}@/_.5em/}/<0,-300>[`;\alpha]
\morphism(650,1150)|r|/{@{>}@/^.5em/}/<0,-300>[`;\alpha']
\efig
\]
which is relative to the category
\[\bfig
\morphism(0,1000)/{@{>}@/^2em/}/<1000,0>[a`b;f]
\morphism(0,1000)|b|/{@{>}@/_2em/}/<1000,0>[a`b;g]
\efig
\]
And 
\[\cat{\telsuc{\telzero{\homcat{\homcat{\bullet}{a}{b}}{f}{g}}}{\alpha}{\alpha'}}\quad\equiv\quad\homcat{\homcat{\homcat{\bullet}{a}{b}}{f}{g}}{\alpha}{\alpha'}\enspace.\]
%
So $\Downarrow$ just concatenates a telescope $t : \Tel~C$ to
$C$. Alternatively we define $\dblplus$ as version of $\Downarrow$
with the implicit category made explicit:
\[
\AxiomC{$C : \Cat~\Gamma$}
\AxiomC{$t : \Tel~C~n$}
\BinaryInfC{$C {\dblplus}\, t : \Cat~\Gamma \qquad C \dblplus\, t \,=\,
  t \Downarrow$}
\DisplayProof
\]
\mnote{We could make $\dblplus$ into a real concatenation of
  telescopes and connect $\Downarrow$ and $\dblplus$ by lemmas }
\mnote{However, the principal judgement of all this is $\cat{E}
  \equiv \cat{E'}$ for some expressions $E$, $E'$.}
%
Note that only the left associative reading of $\dblplus$ makes sense
so $C \dblplus\, t \dblplus\, u \, = \, (C \dblplus\, t) \dblplus\,
u$ and the scope of $\Downarrow$ always extends as far to the left as
sensible. 




With telescopes we can define all compositions of an
$\omega$-category. Note that these have to be defined mutually recursively with
their extensions to telescopes. 
%
\[
\AxiomC{$\{t : \Tel~(\homcat{C}{a}{b})~n\}
\qquad
\{u : \Tel~(\homcat{C}{b}{c})~n\}
\qquad
\alpha : \Obj (t \Downarrow)
\qquad 
\beta : \Obj (u \Downarrow)
$}
\UnaryInfC{$\beta\circ \alpha : \Obj (u \circ t \Downarrow)$}
\DisplayProof
\]
where 
\[
\AxiomC{$t : \Tel~(\homcat{C}{a}{b})~n \qquad u :
  \Tel~(\homcat{C}{b}{c})~n$}
\UnaryInfC{$u \circ  t  : \Tel~(\homcat{C}{a}{c})$}
\DisplayProof
\]
is defined by
\[
\AxiomC{$\telzero{C} \circ \telzero{C} \,=\,\telzero{C}$}
\DisplayProof
\quad
\AxiomC{$\telsuc{u}{a'}{b'} \circ \telsuc{t}{a}{b} \,=\, \telsuc{(u
    \circ t) }{a' \circ a}{b' \circ b}$}
\DisplayProof
\]

\subsection{Units}\label{sec:units}
Any $n$-cell has $n$ compositions and so it should have $n$ units. We
generate all from a single constructor $\id$ defined as follows:
\[
\AxiomC{$a : \Obj~C$}
\UnaryInfC{$\id~a : \Obj ~\homcat{C}{a}{a}$}
\DisplayProof
\]
%
By iteration we obtain the unit for composition $n$ levels deep.
\[
\AxiomC{$a : \Obj~C$}
\AxiomC{$ n : \Nat$}
\BinaryInfC{$ \idTel{a}{n} : \Tel ~C~n \qquad \id^n a : \Obj~ (\idTel{a}{n} \Downarrow) $}
\DisplayProof
\]
Again, an iterated unit is defined at the same time as the telescopes
it lies in:
\[
\AxiomC{$\idTel{a}{0} \,=\, \telzero{C}$}
\DisplayProof
\quad
\AxiomC{$\id^0 a \, =\, a$}
\DisplayProof
\]
\[
\AxiomC{$\idTel{a}{(n+1)}\, = \,
  \telsuc{(\idTel{a}{n})}{\id^n a}{\id^n a}$}
\DisplayProof
\quad
\AxiomC{$\id^{(n+1)}a\,=\, \id\, (\id^n a)$}
\DisplayProof
\]

%
\subsection{Left-unit coherence cells}
%
In a strict $\omega$-category units are accompanied by laws making
them unital with respect to composition. In the weak setting such laws
are replaced by coherence cells, which we discuss next.

With the development of the previous two sections we can express
compositions such as:
\[
\id\,b \circ f \qquad \id^2\,b \circ \alpha\qquad \id\,f'\circ \alpha
\]
pictured respectively from left to right as
\[
\bfig
\morphism[a`b;f]
\morphism(500,0)<250,0>[b`b;\id\,f]
\efig
\qquad
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(250,50)<0,-100>[`;\alpha]
\morphism(500,0)/{@{>}@/^1em/}/[b`b;\id\,b]
\morphism(500,0)|b|/{@{>}@/_1em/}/[b`b;\id\,b]
\morphism(750,50)<0,-100>[`;\id^2 b]
\efig
\qquad
\bfig\scalefactor{1.2}
\morphism/{@{>}@/^1.7em/}/[a`b;f]
\morphism|-|[a`b;f']
\morphism(250,110)<0,-80>[`;\alpha]
%
\morphism|b|/{@{>}@/_1.7em/}/[a`b;f']
\morphism(250,-20)<0,-80>[`;\id\,f']
\efig
\enspace.\]
We want to define the cells that connect these cells to the cells:
\[
\bfig
\morphism[a`b;f]
\efig
\qquad
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(250,50)<0,-100>[`;\alpha]
\efig
\qquad
\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(250,50)<0,-100>[`;\alpha]
\efig
\]

Let us analyse the situation at hand.

Firstly, note that the right-most case is just the left-most case in
the category $\homcat{\bullet}{a}{b}$ so from now on we assume
everything is taking place in an arbitrary \emph{base category},
$\cC$.

For the left-most case, assuming $a$ and $b$ are 0-cells of
  $\cC$, we simply introduce the syntax for a 2-cell $\lambda_f$ of $\cC$:
\[\bfig
\qtriangle[a`b`b;f`f`\id\,b]
\morphism(400,400)/<=/<-100,-100>[`;\lambda_f]
\efig\]

Having defined a 2-cell $\lambda_f$ for
  every 1-cell $f$, one can define a 3-cell $\lambda_\alpha$ for every
  2-cell $\alpha : f \Rightarrow f'$ as going from the left-hand side
  to the right-hand side below:
\[\bfig
\morphism/{@{>}@/^1em/}/[a`b;f]
\morphism(500,0)/{@{>}@/^1em/}/[b`b;\id\,f]
\morphism/{@{>}@/^3em/}/<1000,0>[a`b;f]
\morphism(500,250)/=>/<0,-100>[`;\lambda_f]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(500,0)|b|/{@{>}@/_1em/}/[b`b;\id\,b]
\morphism(250,50)/=>/<0,-100>[`;\alpha]
\morphism(750,50)/=>/<0,-100>[`;\id^2 b]
\efig
\quad\Rrightarrow\quad
\bfig
\morphism/{@{>}@/^3em/}/<1000,0>[a`b;f]
\morphism|m|/{@{>}@/^1.6em/}/<1000,0>[a`b;f']
\morphism(500,290)/=>/<0,-100>[`;\alpha]
\morphism|b|/{@{>}@/_1em/}/[a`b;f']
\morphism(500,0)|b|/{@{>}@/_1em/}/[b`b;\id\,b]
\morphism(750,90)/=>/<0,-100>[`;\lambda_{f'}]
\efig
\]
Note however that because we are not working in a strict setting
the pasting together of the left-hand side is not unique. We pick a
particular one:
\[
\lambda_\alpha ~:~ ((\id^2 b) \circ \alpha) \cdot \lambda_f \Rrightarrow \lambda_{f'}\cdot
\alpha\enspace,
\]
where $\circ$ denotes composition in $\cC$ and $\cdot$ denotes
composition in $\homcat{\cC}{a}{b}$. In $\homcat{\cC}{a}{b}$ this is
the diagonal filler in the square
\begin{equation}\label{eq:lambda-natur}
\bfig
\Square[f`(\id\,b) \circ f` f'`(\id\,b)\circ f';\lambda_f`\alpha`(\id^2
b) \circ \alpha`\lambda_{f'}]
\morphism(500,300)/=>/<-200,-150>[`;\lambda_\alpha]
\efig
\end{equation}

This diagram expresses the naturality of the assignment $f \mapsto
\lambda_f$ with respect to cells $\alpha : f \Rightarrow f'$ 
witnessed by $\lambda_\alpha$. 
%

When we put:
\[
\AxiomC{$t : \Tel~\homcat{C}{a}{b}~n$}
\AxiomC{$x : \Obj~(t\Downarrow)$}
\BinaryInfC{$\dom\lambda_0~x~=~x \qquad
  \cod\lambda_0~x~=~\id^n(\id~b)\circ x$}
\DisplayProof
\]
\[
\AxiomC{$t : \Tel~\homcat{C}{a}{b}~n$}
\AxiomC{$x : \Obj~(t\Downarrow)$}
\BinaryInfC{$\lambda_n x : \Obj~(\telsuc{t}{\dom\lambda_n\, x
  }{\cod\lambda_n\,x}\Downarrow)$}
\DisplayProof
\]
then \eqref{eq:lambda-natur} can be rewritten as follows:
\begin{equation}\label{eq:lambda-natur2}
\bfig
\Square[\dom\lambda_0\,f`\cod\lambda_0\,f`\dom\lambda_0~f'`\cod\lambda_0~f';
\lambda_0 f`\dom\lambda_0~\alpha`\cod\lambda_0~\alpha`\lambda_0 f']
\morphism(500,300)/=>/<-200,-150>[`;\lambda_1 \alpha]
\efig\enspace,
\end{equation}
where necessarily 
\[
\AxiomC{$\dom\lambda_1\,\alpha = \cod\lambda_0\,\alpha\cdot
  \lambda_0\,f$}
\DisplayProof
\qquad \AxiomC{$\cod\lambda_1\,\alpha = \lambda_0\, f'\cdot
  \dom\lambda_0\,\alpha$}
\DisplayProof
\]
Here $\cdot$ denotes vertical composition of 2-cells and $\circ$ is,
as before, horizontal composition.

%
To generalise and iterate \eqref{eq:lambda-natur2} we
introduce an $n+1$ cell $\quad\lambda~t~x\quad$ for each telescope
$\quad t :\Tel~\homcat{C}{a}{b}~n\quad$ and $\quad x :
\Obj~(t\Downarrow)\quad$. At the same time we introduce functions
$\dom\lambda$ and $\cod\lambda$ taking a telescope $t$, a telescope
$u$ relative to $t$, formally $u : \Tel ~ (t \Downarrow)~ m$ and a
cell $x : \Obj (u\Downarrow)$ to a new telescope and a cell in it so
that the following makes sense:
\begin{equation}\label{eq:lambda-natur3}
\bfig
\Square[\dom\lambda~t~\telzero{t\Downarrow}~x`
\cod\lambda~t~\telzero{t\Downarrow}~x`
\dom\lambda~t~\telzero{t\Downarrow}~x'`
\cod\lambda~t~\telzero{t\Downarrow}~x';
\lambda~t~x`
\dom\lambda~t~\telsuc{\telzero{t\Downarrow}}{f}{f'}~\alpha`
\cod\lambda~t~\telsuc{\telzero{t\Downarrow}}{f}{f'}~\alpha`
\lambda~t~x']
\morphism(500,300)/=>/<-200,-150>[`;\lambda_\alpha]
\efig
\end{equation}
%
Formally, we have the following definitions which generate all
$\quad\lambda ~t~x\quad$'s for all telescopes $t$ and objects $x$ in
them.
%
%
\begin{enumerate}
\item $\Obj$ receives a new constructor:
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\AxiomC{$f : \Obj~(t \Downarrow)$}
\BinaryInfC{$\lambda~t~f : \Obj~
  (\lambda\Tel~\telsuc{t}{f}{f}\Downarrow)$}
\DisplayProof
\]
%
%
\item $\lambda\Tel$ is a function on telescopes:
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\UnaryInfC{$\lambda\Tel~t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\DisplayProof
\]
\begin{equation}\label{eq:lambda-tel-def}
\AxiomC{$\lambda\Tel~\telzero{C} ~= ~ \telzero{C}$}
\DisplayProof
\quad
\AxiomC{$\lambda\Tel~(\telsuc{t}{f}{f'})~=~\telsuc{(\lambda\Tel~t)}{\dom\lambda~t~\telzero{t\Downarrow}~f}{\cod\lambda~t~\telzero{t\Downarrow}~f'}$}
\DisplayProof
\end{equation}
%
%
\item 
Functions $\dom\lambda$ and $\cod\lambda$ used above have the
following types:
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\AxiomC{$u : \Tel~(t \Downarrow)~m$}
\AxiomC{$x : \Obj~u\Downarrow$}
\TrinaryInfC{$\dom\lambda~t~u~x : \Obj~(\homcat{C}{a}{b} \dblplus
  ~ \lambda\Tel~t~ \dblplus~\dom\lambda\Tel~t~u)$}
\DisplayProof
\]
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\AxiomC{$u : \Tel~(t \Downarrow)~m$}
\AxiomC{$x : \Obj~u\Downarrow$}
\TrinaryInfC{$\cod\lambda~t~u~x : \Obj~(\homcat{C}{a}{b} \dblplus
  ~ \lambda\Tel~t~ \dblplus~\cod\lambda\Tel~t~u)$}
\DisplayProof
\]
%
We omit the definitions, which in full detail are a bit technical. Just
note that the base case, $n= 0$ is defined as above for
$\dom\lambda_0$ and $\cod\lambda_0$ respectively, and in the induction
step $\dom\lambda~\{n = k+1\}$ is defined in terms $\cod\lambda~\{n =
k\}$ and $\lambda~\{n = k\}$, and similarly $\cod\lambda~\{n=k+1\}$ is defined
in terms of $\dom\lambda~\{n=k\}$ and $\lambda~\{n=k\}$ of the smaller dimension.

\end{enumerate}

\subsection{Right units, associativity and interchange}
Similarly to $\lambda$'s we define the remaining coherence cells,
i.e. $\rho$'s to witness \emph{right units}, $\alpha$'s to witness
\emph{associativity} of composition and $\chi$'s to witness
interchange. These are defined analogically to $\lambda$'s. Below we present
only the top-level constructor forms. 
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\AxiomC{$f : \Obj~(t \Downarrow)$}
\BinaryInfC{$\rho~t~f : \Obj~
  (\rho\Tel~\telsuc{t}{f}{f})\Downarrow$}
\DisplayProof
\]
\smallskip
\[
\AxiomC{$t : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\noLine
\UnaryInfC{$f : \Obj~t \Downarrow$}
\AxiomC{$u : \Tel~\homcat{\mathcal{C}}{b}{c}~n$}
\noLine
\UnaryInfC{$g : \Obj~u \Downarrow$}
\AxiomC{$v : \Tel~\homcat{\mathcal{C}}{c}{d}~n$}
\noLine
\UnaryInfC{$h : \Obj~v \Downarrow$}
\TrinaryInfC{$\alpha~t~u~v~f~g~h : \Obj~(\alpha\Tel~\telsuc{t}{f}{f}~\telsuc{u}{g}{g}~\telsuc{v}{h}{h})\Downarrow$}
\DisplayProof
\]
\smallskip
\[
\AxiomC{$u_1 : \Tel~\homcat{\mathcal{C}}{a}{b}~n$}
\AxiomC{$u_2 : \Tel~\homcat{\mathcal{C}}{b}{c}~n$}
\noLine
\BinaryInfC{$t_{11} : \Tel~\telsuc{u_1}{a_1}{b_1}\Downarrow ~ m \qquad
t_{12} : \Tel~\telsuc{u_1}{b_1}{c_1}\Downarrow ~ m$}
\noLine
\UnaryInfC{$t_{21} : \Tel~\telsuc{u_2}{a_2}{b_2}\Downarrow ~ m \qquad
  t_{22} : \Tel~\telsuc{u_2}{b_2}{c_2}\Downarrow ~ m$}
\noLine
\UnaryInfC{$\alpha_{11} : \Obj~t_{11}\Downarrow\qquad 
\alpha_{12} : \Obj~t_{12}\Downarrow
\qquad
\alpha_{21} : \Obj~t_{21}\Downarrow
\quad
\alpha_{22} : \Obj~t_{22}\Downarrow$}
\UnaryInfC{$\chi~\alpha_{11}~\alpha_{12}~\alpha_{21}~\alpha_{22}: \Obj~(\chi\Tel~t_{11}~t_{12}~t_{21}~t_{22})\Downarrow$}
\DisplayProof
\]

We also include each of $\lambda$, $\rho$, $\alpha$ and $\chi$ in
their reversed forms, denoted $\lambda^-$, $\rho^-$, $\alpha^-$ and
$\chi^-$ respectively, as each of them should be equivalences. At this
point, the only thing we have done is postulating two cells going in
the opposite directions. The following section introduces the
necessary syntax to make them true \emph{weak equivalences}.


\subsection{Coherence cells between coherence cells}
Finally we add all coherence cells between parallel coherence
cells and their compositions. To this end we define a predicate
$\hollow$ on objects:
\[
\AxiomC{$x :  \Obj~C$}
\UnaryInfC{$\hollow~x~:~\Set$}
\DisplayProof
\]
%
Such that all identities, $\alpha$'s, $\rho$'s, $\lambda$'s and
$\chi$'s are hollow, and all weakenings and compositions of
hollow cells are hollow. Then we introduce a constructor of $\Obj$:
\[
\AxiomC{$f ~ g : \Obj~\homcat{C}{a}{b}$}
\AxiomC{$p : \hollow~f$}
\AxiomC{$q : \hollow~g$}
\TrinaryInfC{$\mathsf{coh}~f~g~p~q :
  \Obj~\homcat{\homcat{C}{a}{b}}{f}{g}$}
\DisplayProof
\]
%
And we define $\hollow~(\mathsf{coh}~f~g~p~q) = \top$.


\newpage

\section{Interpretation}
\label{sec:interpretation}
\subsection{Globular sets}
A weak $\omega$-category is a globular set, $G$, with certain
constraints on existence of cells. For example, for each object $a$ in
$G$ there must be an object $\id_a$ in $(\mathsf{hom}~G~a~a)$, and for
$x$ in $(\mathsf{hom}~G~a~b)$ and $y$ in $(\mathsf{hom}~G~b~c)$ there
must be an object in $(\mathsf{hom}~G~a~c)$. Abstractly we can
formalise all such constraints by the existence of an action of the
syntax of weak $\omega$-categories on $G$. The details follow:

\begin{definition}
A \emph{weak $\omega$ category} is given by the following data:
\begin{enumerate}
\item A globular set $G : \Glob$ 
\item An action of the syntax of objects on contexts, which are
  lists of cells of $G$:
\[
\AxiomC{$\{\Gamma : \Con\}$}
\AxiomC{$\{C : \Cat~\Gamma\}$}
\AxiomC{$o : \Obj~C\qquad x : \intpr{\Gamma}$}
\TrinaryInfC{$\intpr{o}~x : \mathsf{obj}~(\intpr{C}~x)$}
\DisplayProof
\]
where the following extensions of $\intpr{\text{-}}$ to contexts,
categories and variables are used:
\[
\AxiomC{$\Gamma : \Con$}
\UnaryInfC{$\intpr{\Gamma} : \Set$}
\DisplayProof
\quad
\AxiomC{$\phantom{\Gamma}$}
\UnaryInfC{$\intpr{\varepsilon} = 1$}
\DisplayProof
\quad
\AxiomC{$\phantom{\Gamma : \Con}$}
%\AxiomC{$C : \Cat~\Gamma$}
\UnaryInfC{$\intpr{\Gamma , C} = \Sigma(x : \intpr{\Gamma})(\intpr{C} ~ x)$}
\DisplayProof
\]
\[
\AxiomC{$C : \Cat ~ \Gamma$}
\AxiomC{$x : \intpr{\Gamma}$}
\BinaryInfC{$\intpr{C}~x : \Glob$}
\DisplayProof
\quad
\AxiomC{$\phantom{\intpr{\Gamma}}$}
\UnaryInfC{$\intpr{\bullet}~x = G$}
\DisplayProof
\AxiomC{$\phantom{\intpr{\Gamma}}$}
\quad
\UnaryInfC{$\intpr{\homcat{C}{a}{b}}~x = \mathsf{hom}~(\intpr{C}
  x)~(\intpr{a} ~ x)~(\intpr{b}~x)$}
\DisplayProof
\]

\[\vdots\]\mnote{to do: variables as projections}
and such that
\[
\AxiomC{$\{C : \Cat~\Gamma\}$}
\AxiomC{$v : \mathsf{Var}~C$}
\BinaryInfC{$\intpr{\var~v} ~=~ \intpr{v}~\intpr{\Gamma}$}
\DisplayProof
\qquad
\AxiomC{$\phantom{x : \Obj~C}$}
\AxiomC{$\phantom{D : \Cat~\Gamma}$}
\BinaryInfC{$\intpr{\wk~x~D}  ~=~ \intpr{x}$}
\DisplayProof
\]
\end{enumerate}
\end{definition}
%
%
% \subsection{Initiality}
% \begin{ondrej}
%   I feel this is important, but must yet fill in the details. Maybe
%   because in the operadic approaches, one is looking for an
%   algebra of a the initial contractible globular operad. 

%   At any rate, we want to have the free weak $\omega$-category on a
%   given context and this should be initial.
% \end{ondrej}
% %
% We show that equality on $\Sigma(C : \Cat~\Gamma) (\Obj~C)$ is
% contractible and that the identity morphism is an interpretation.  But
% we already know that it's the case because equality on $\Obj~C$ is
% decidable.
% %
% \mnote{More detail is needed.}
% %
% % This shows the globular set $\Sigma(C : \Cat~\Gamma)(\Obj~C)$ (see
% % \ref{}) is the initial weak $\omega$-category....
% % \begin{ondrej}
% %   \textsc{Total rubbish}! what is the real connection with initiality?
% % \end{ondrej}

% \begin{ondrej}
%   Deepen and reference the connection with the syntactical development
%   of globular sets and meets.
% \end{ondrej}

\subsection{Example: the weak $\omega$-groupoid of a type}



\end{document}
